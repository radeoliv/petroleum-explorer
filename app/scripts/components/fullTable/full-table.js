// Generated by CoffeeScript 1.7.1
(function () {
	var FullTable;
	/**
	 * @class FullTable
	 * @param SearchController with search results
	 * @param $tableContainer {*|jQuery} object for placeholder for table data
	 */
	FullTable = (function () {
		function FullTable(SearchController, $tableContainer) {
			this.SearchController = SearchController;
			this.$tableContainer = $tableContainer;
			this.displayTable();
			this.listenChanges();
			this.toggleButton = $tableContainer.parent().find("toggle-table").removeAttr("diabled");
			this.listenToggle();
		}

		/**
		 * Display all search results in table container using datatables
		 * @returns {*}
		 */
		FullTable.prototype.displayTable = function () {
			var data;
			console.log("Call to display table");
			console.dir(this.SearchController.resultSet);
			// Check if datatable has already been initialized.  If it is, then exit to avoid error
			if (this.$tableContainer.hasClass(".dataTable") === true) {
				return;
			}
			if (this.SearchController.resultSet.length > 0) {
				data = this.SearchController.resultSet;
				this.$tableContainer.dataTable({
					data:    data,
					columns: [
						{
							data: "H"
						},
						{
							data: "InstanceId"
						},
						{
							data: "KRav"
						},
						{
							data: "KRc"
						},
						{
							data: "OID_"
						},
						{
							data: "PHIR"
						},
						{
							data: "PHIc"
						},
						{
							data: "PLOT_SYMBO"
						},
						{
							data: "Pc"
						},
						{
							data: "Pp"
						},
						{
							data: "Pt"
						},
						{
							data: "Soc"
						},
						{
							data: "UWI"
						},
						{
							data: "Vshc"
						},
						{
							data: "Well_Class"
						},
						{
							data: "Well_Drill"
						},
						{
							data: "Well_Opera"
						},
						{
							data: "Well_PoolN"
						},
						{
							data: "Well_Prima"
						},
						{
							data: "Well_Provi"
						},
						{
							data: "Well_Statu"
						},
						{
							data: "Well_Uniqu"
						},
						{
							data: "Well_WellN"
						}
					]
				});
				// For debugging
				return console.log("Attempting to create datatable with data" + this.SearchController.resultSet);
			}
		};

		/**
		 * Toggle table update on `ResultsUpdated` event
		 * @returns {*|jQuery}
		 */
		FullTable.prototype.listenChanges = function () {
			return $("body").on("ResultsUpdated", (function (_this) {
				return function () {
					return _this.displayTable();
				};
			})(this));
		};

		/**
		 * Toggle full table data when clicking the button
		 * @returns {*}
		 */
		FullTable.prototype.listenToggle = function () {
			return this.toggleButton.on("click", (function (_this) {
				return function () {
					return _this.$tableContainer.toggle("slow");
				};
			})(this));
		};

		return FullTable;

	})();

	(typeof exports !== "undefined" && exports !== null ? exports : window).FullTable = FullTable;

}).call(this);
